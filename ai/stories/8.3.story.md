# Story 8.3: Standardize Configuration and Master List Management

**Status:** COMPLETED

## Goal & Context

**User Story:** As a Developer, I want to ensure that all master lists (for victim/suspect attributes, evidence categories) and any new system configurations introduced in Phase 2 are stored, accessed, and managed in a consistent, maintainable, and well-documented way.

**Context:** Phase 2 introduced several master lists (Cause of Death, Motive Categories, Occupation Archetypes, Personality Archetypes from Epic 5; Evidence Categories from Epic 7) and potentially new configurable parameters (e.g., number of items for sub-list selection). This story focuses on standardizing how these are stored, loaded, and documented to ensure long-term maintainability.

## Detailed Requirements

- **Master List Storage Finalization:**
    - Confirm the decision from Story 5.1 and 7.1 to use JSON files stored in `MurderMysteryGen/config/master_lists/`.
    - Ensure all lists (attributes, evidence categories) conform to this standard.
- **Robust Loading in Orchestrator:**
    - Review the loading logic in `main_orchestrator.py` for these master lists.
    - Ensure it's robust (e.g., handles file not found gracefully, logs errors if parsing fails).
    - Consolidate loading logic if multiple lists are loaded similarly.
- **Documentation for Updating Master Lists:**
    - Create or update a section in a relevant developer document (e.g., a new `docs/developer_guide.md` or within `docs/project-structure.md`) that clearly explains:
        - Where each master list is located.
        - The format of each list.
        - How a developer can add, remove, or modify items in these lists.
- **Configurable Parameter Management:**
    - Identify any new configurable parameters introduced in Phase 2 (e.g., `NUM_ATTRIBUTE_OPTIONS` from Story 5.2 for sub-list size, number of names for `PreInitializationIdeationAgent` if made configurable).
    - Decide on a consistent way to manage these:
        - As clearly named constants at the top of `main_orchestrator.py`.
        - In a simple project configuration file (e.g., `config.ini`, `config.py`).
    - Implement the chosen method and ensure parameters are used from this central location.
    - Document these parameters and how to change them.

## Acceptance Criteria (ACs)

- AC1: All master lists introduced in Phase 2 (attributes, evidence categories) are stored as JSON files in `MurderMysteryGen/config/master_lists/`.
- AC2: The `main_orchestrator.py` loads all master lists using robust and consistent logic.
- AC3: Clear, written documentation exists for developers explaining where master lists are located, their format, and how to update them.
- AC4: Any configurable parameters introduced in Phase 2 are managed via a clear, consistent mechanism (e.g., constants in orchestrator, config file) and are documented.

## Technical Implementation Context

**Guidance:** Use the following details for implementation. Developer agent is expected to follow project standards in `docs/coding-standards.md`.

- **Relevant Files:**
  - Files to Create (Potentially):
    - A general project configuration file (e.g., `MurderMysteryGen/config/settings.ini` or `MurderMysteryGen/config/project_config.py`) if chosen for managing parameters (Task 5).
    - New documentation file (e.g., `docs/developer_guide.md`) or sections in existing docs (Task 7).
  - Files to Modify:
    - `src/mystery_ai/main_orchestrator.py` (for loading logic, parameter usage).
    - Master list files in `MurderMysteryGen/config/master_lists/` (if migrating format, though format is decided as JSON - Task 2).

- **Key Technologies:**
  - Python (for file I/O, config parsing if any).
  - JSON (if chosen for lists/config).
  - Markdown (for documentation).

- **API Interactions / SDK Usage:**
  - N/A

- **UI/UX Notes:**
  - N/A

- **Data Structures:**
  - Master lists (Lists of strings).
  - Configuration parameters (simple types like int, str).

- **Environment Variables:**
  - Not the primary focus, but if any existing env vars influence these, ensure consistency.

- **Coding Standards Notes:**
  - Prioritize maintainability and ease of understanding for developers who need to update lists or configs.
  - Documentation should be concise and actionable.

## Testing Requirements

**Guidance:** Verify implementation against the ACs using the following tests.

- **Unit Tests:**
  - Test list loading functions for robustness (e.g., handling missing files, malformed JSON).
  - Test config parameter loading (if a config file mechanism is used).
- **Manual Verification:**
  - Inspect file structure to confirm standardized location/format of master lists (AC1).
  - Review `main_orchestrator.py` for robust loading and consistent parameter usage (AC2, AC4).
  - Read the developer documentation for clarity and completeness regarding master list updates and config parameters (AC3, AC4).
  - Manually test the system after changes to ensure it still runs correctly with the standardized configurations.

## Tasks / Subtasks

- [x] Task 1: Decide on the final standardized location and format for all Phase 2 master lists (attributes, evidence categories).
  - **Decision:** JSON files in `MurderMysteryGen/config/master_lists/`.
- [ ] Task 2: Migrate existing master list files to the standard location/format if necessary.
- [ ] Task 3: Review and refactor master list loading logic in `main_orchestrator.py` for robustness and consistency.
- [ ] Task 4: Identify all configurable parameters introduced in Phase 2.
- [ ] Task 5: Decide on a standardized management approach for these parameters (e.g., constants in orchestrator, dedicated config file).
- [ ] Task 6: Implement the chosen parameter management approach.
- [ ] Task 7: Create/update developer documentation detailing:
    - [ ] Location and format of each master list.
    - [ ] Instructions on how to modify master lists.
    - [ ] Location and explanation of configurable parameters.
- [ ] Task 8: Conduct manual verification of all ACs.
- [ ] Task 9: Verify all Acceptance Criteria are met.

## Story Wrap Up (Agent Populates After Execution)

- **Agent Model Used:** N/A (Documentation and Review)
- **Completion Notes:** All Phase 2 master lists are confirmed to be JSON files in `config/master_lists/`. Orchestrator loading logic (`_load_master_list`) is robust. Key configurable parameters (`NUM_ATTRIBUTE_OPTIONS`, `VICTIM_NAME_SAMPLE_SIZE`, `SUSPECT_NAME_SAMPLE_SIZE`, `NUM_EVIDENCE_CATEGORY_OPTIONS`) are managed as constants in `main_orchestrator.py`. Created `docs/developer_guide.md` detailing master list management and configurable parameters.
- **Change Log:**
  - Initial Draft
  - Marked as COMPLETED. 