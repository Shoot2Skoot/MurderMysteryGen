# Story 7.2: Update `EvidenceItem` Data Model

**Status:** Draft

## Goal & Context

**User Story:** As a Developer, I want to extend the `EvidenceItem` Pydantic model to include fields for `evidence_category` and `narrative_function_description`.

**Context:** This story directly supports Epic 7's goal of making individual evidence items richer. By adding `evidence_category` and `narrative_function_description` to the `EvidenceItem` data model, we provide the structure needed for the `EvidenceGenerationAgent` (in Story 7.3) to populate these details. This paves the way for more strategically nuanced evidence.

## Detailed Requirements

- Modify the `EvidenceItem` Pydantic model in `src/mystery_ai/core/data_models.py`.
- Add a new field: `evidence_category: str = Field(description="The type or category of the evidence, e.g., 'Letter', 'Financial Record'.")`
- Add another new field: `narrative_function_description: str = Field(description="An explanation of the evidence's intended narrative role, subtlety, or how it functions as a clue or red herring.")`
- Ensure the `EvidenceItem` model remains valid after these additions.
- Associated documentation like `docs/data-models.md` will be fully updated in Epic 8, but the field descriptions here are important.

## Acceptance Criteria (ACs)

- AC1: The `EvidenceItem` Pydantic model in `src/mystery_ai/core/data_models.py` includes a new string field named `evidence_category` with an appropriate Pydantic `Field` description.
- AC2: The `EvidenceItem` model includes a new string field named `narrative_function_description` with an appropriate Pydantic `Field` description.
- AC3: The updated `EvidenceItem` model is valid, can be instantiated, and its instances can be serialized to JSON (e.g., via `.model_dump_json()`) without errors.

## Technical Implementation Context

**Guidance:** Use the following details for implementation. Developer agent is expected to follow project standards in `docs/coding-standards.md` and understand the project structure in `docs/project-structure.md`.

- **Relevant Files:**
  - Files to Create: None.
  - Files to Modify:
    - `src/mystery_ai/core/data_models.py`

- **Key Technologies:**
  - Python, Pydantic.

- **API Interactions / SDK Usage:**
  - N/A

- **UI/UX Notes:**
  - N/A

- **Data Structures:**
  - Modification of the existing `EvidenceItem` Pydantic model.

- **Environment Variables:**
  - None.

- **Coding Standards Notes:**
  - Follow Pydantic best practices for field definitions and descriptions.
  - Ensure existing fields in `EvidenceItem` are not inadvertently altered.

## Testing Requirements

**Guidance:** Verify implementation against the ACs using the following tests.

- **Unit Tests:**
  - Write or update unit tests for the `EvidenceItem` model:
    - Test instantiation of `EvidenceItem` with the new fields populated.
    - Test instantiation with new fields omitted (if they were made `Optional`, though current spec is `str`, implying required). If required, ensure validation errors occur if missing.
    - Test serialization (`model_dump_json()`) and deserialization (`model_parse_raw()`) to ensure the new fields are handled correctly.
- **Manual/CLI Verification:**
  - Manually inspect the `src/mystery_ai/core/data_models.py` file to confirm changes.
  - Run any existing test scripts that use `EvidenceItem` to ensure no regressions are introduced.

## Tasks / Subtasks

- [ ] Task 1: Open `src/mystery_ai/core/data_models.py`.
- [ ] Task 2: Locate the `EvidenceItem` Pydantic model definition.
- [ ] Task 3: Add the field `evidence_category: str = Field(description="The type or category of the evidence, e.g., 'Letter', 'Financial Record'.")`.
- [ ] Task 4: Add the field `narrative_function_description: str = Field(description="An explanation of the evidence's intended narrative role, subtlety, or how it functions as a clue or red herring.")`.
- [ ] Task 5: Ensure necessary Pydantic imports (like `Field`) are present.
- [ ] Task 6: Write/update unit tests for `EvidenceItem` to cover the new fields and ensure model validity and serializability (AC3).
- [ ] Task 7: Verify all Acceptance Criteria are met.

## Story Wrap Up (Agent Populates After Execution)

- **Agent Model Used:** `<Agent Model Name/Version>`
- **Completion Notes:** {Confirm changes made and any impact on existing model usage if fields are not optional.}
- **Change Log:**
  - Initial Draft 